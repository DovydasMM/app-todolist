{"ast":null,"code":"import { Project } from \"./shared/task/project.model\";\nimport { TaskModel } from \"./shared/task/task.model\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"./task-list.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"./posts.service\";\nexport class ProjectsService {\n  constructor(taskService, router, postService) {\n    this.taskService = taskService;\n    this.router = router;\n    this.postService = postService;\n  }\n  getProjectList() {\n    // return this.projectList;\n    this.postService.fetchPost().subscribe(responseData => {\n      return responseData;\n    });\n  }\n  getProjectByID(id) {\n    return this.projectList[id];\n  }\n  createProject(name) {\n    let id = \"\";\n    let taskArray = [];\n    let newProject = new Project(name, taskArray, this.projectList.length - 1, id);\n    this.projectList.push(newProject);\n    this.router.navigate([`/projects/${this.projectList.length}`]);\n    this.postService.createAndStorePost(newProject).subscribe(responseData => {\n      newProject.id = responseData;\n      //Gets unique ID from firebase and asigns to new project\n      this.postService.updatePost(responseData, {\n        id: responseData\n      }).subscribe();\n    });\n  }\n  addTask(currentProject, name, desc, date) {\n    const projectID = this.projectList.indexOf(currentProject);\n    const newTask = new TaskModel(name, desc, date, false);\n    this.projectList[projectID].projectTaskList.push(newTask);\n    this.taskService.taskList.push(newTask);\n  }\n  deleteTask(task, currentProject = \"\") {\n    let x;\n    this.postService.fetchPost().subscribe(responseData => {\n      x = responseData;\n      console.log(x);\n    });\n    console.log(x);\n    if (currentProject == \"\") {\n      const project = this.projectList.find(list => list.projectTaskList.includes(task));\n      const taskID = project.projectTaskList.indexOf(task);\n      project.projectTaskList.splice(taskID, 1);\n    }\n    // this.taskService.deleteTask(task);\n  }\n\n  deleteProject(project) {\n    this.postService.deletePost(project.id);\n    if (project.projectTaskList.length) this.taskService.deleteTasksOfProject(project.projectTaskList);\n    this.projectList.splice(this.projectList.indexOf(project), 1);\n  }\n  importProject() {\n    this.postService.fetchPost().subscribe(responseData => {\n      this.projectList = responseData;\n    });\n  }\n}\nProjectsService.ɵfac = function ProjectsService_Factory(t) {\n  return new (t || ProjectsService)(i0.ɵɵinject(i1.TaskListService), i0.ɵɵinject(i2.Router), i0.ɵɵinject(i3.PostsService));\n};\nProjectsService.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n  token: ProjectsService,\n  factory: ProjectsService.ɵfac,\n  providedIn: \"root\"\n});","map":{"version":3,"mappings":"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","names":["Project","TaskModel","ProjectsService","constructor","taskService","router","postService","getProjectList","fetchPost","subscribe","responseData","getProjectByID","id","projectList","createProject","name","taskArray","newProject","length","push","navigate","createAndStorePost","updatePost","addTask","currentProject","desc","date","projectID","indexOf","newTask","projectTaskList","taskList","deleteTask","task","x","console","log","project","find","list","includes","taskID","splice","deleteProject","deletePost","deleteTasksOfProject","importProject","factory","providedIn"],"sourceRoot":"","sources":["/home/dovydas/repos/app-todolist/src/app/projects.service.ts"],"sourcesContent":["import { Injectable } from \"@angular/core\";\nimport { Project } from \"./shared/task/project.model\";\nimport { TaskModel } from \"./shared/task/task.model\";\nimport { TaskListService } from \"./task-list.service\";\nimport { Task } from \"./task\";\nimport { Router } from \"@angular/router\";\nimport { PostsService } from \"./posts.service\";\n\n@Injectable({\n  providedIn: \"root\",\n})\nexport class ProjectsService {\n  constructor(\n    private taskService: TaskListService,\n    private router: Router,\n    private postService: PostsService\n  ) {}\n\n  projectList: Project[];\n\n  getProjectList() {\n    // return this.projectList;\n    this.postService.fetchPost().subscribe((responseData)=> return responseData)\n  }\n\n  getProjectByID(id) {\n    return this.projectList[id];\n  }\n\n  createProject(name) {\n    let id = \"\";\n    let taskArray = [];\n    let newProject: Project = new Project(\n      name,\n      taskArray,\n      this.projectList.length - 1,\n      id\n    );\n    this.projectList.push(newProject);\n    this.router.navigate([`/projects/${this.projectList.length}`]);\n    this.postService\n      .createAndStorePost(newProject)\n      .subscribe((responseData) => {\n        newProject.id = responseData;\n        //Gets unique ID from firebase and asigns to new project\n        this.postService\n          .updatePost(responseData, { id: responseData })\n          .subscribe();\n      });\n  }\n\n  addTask(currentProject, name, desc, date) {\n    const projectID = this.projectList.indexOf(currentProject);\n    const newTask = new TaskModel(name, desc, date, false);\n    this.projectList[projectID].projectTaskList.push(newTask);\n    this.taskService.taskList.push(newTask);\n  }\n\n  deleteTask(task, currentProject: any = \"\") {\n    let x;\n    this.postService.fetchPost().subscribe((responseData) => {\n      x = responseData;\n      console.log(x);\n    });\n    console.log(x);\n    if (currentProject == \"\") {\n      const project = this.projectList.find((list) =>\n        list.projectTaskList.includes(task)\n      );\n      const taskID = project.projectTaskList.indexOf(task);\n      project.projectTaskList.splice(taskID, 1);\n    }\n\n    // this.taskService.deleteTask(task);\n  }\n\n  deleteProject(project: Project) {\n    this.postService.deletePost(project.id);\n    if (project.projectTaskList.length)\n      this.taskService.deleteTasksOfProject(project.projectTaskList);\n    this.projectList.splice(this.projectList.indexOf(project), 1);\n  }\n\n  importProject() {\n    this.postService.fetchPost().subscribe((responseData) => {\n      this.projectList = responseData;\n    });\n  }\n}\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}